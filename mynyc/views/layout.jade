doctype html
html
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css?i=a')
    
    
    script(type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDnW0Tg6LWLop77232_WDkZ9DUq5w07-BA&callback=initMap" async defer)
    
    script.
      //var title = "!{title}";
      //window.alert(title);
      
      function initMap() {
        var mapDiv = document.getElementById('map');
        var map = new google.maps.Map(mapDiv, {center: {lat: 40.752019, lng: -73.988803}, zoom: 18});
        
        var markers = !{restaurants2};
        var bounds = new google.maps.LatLngBounds();
        
        for(i=0;i<markers.length;i++){
          coords = (markers[i].address.coord).split(",");
          var marker = new google.maps.Marker({
            position: new google.maps.LatLng( parseFloat(coords[1]).toFixed(6), parseFloat(coords[0]).toFixed(6)),
            map: map,
            title: markers[i].name,
            icon: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png",
          });
          bounds.extend(marker.position);
          //window.alert(marker.position);
        }
        map.fitBounds(bounds);
      }

  body
    block content
